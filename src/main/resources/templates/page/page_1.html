<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="header :: head"></head>
<body>
<div class="col-sm-12" style="padding: 30px 0 20px 0">
    <form class="form-horizontal" id="selectItem">
        <div class="form-group col-sm-3">
            <label for="hand_in_name1" class="control-label col-sm-4">专利名称：</label>
            <div class="col-sm-8">
                <input type="text" id="hand_in_name1" name="handInName" placeholder="专利名称" class="form-control">
            </div>
        </div>
        <div class="form-group col-sm-3" style="display:none">
            <label for="hand_in_applicant" class="control-label col-sm-4">申请人：</label>
            <div class="col-sm-8">
                <input type="hidden" id="hand_in_applicant" name="handInApplicant" placeholder="申请人"
                       class="form-control" th:value="${session.userInfo.getId()}">
            </div>
        </div>
        <div class="form-group col-sm-3">
            <label for="inventor_name" class="control-label col-sm-4">发明人：</label>
            <div class="col-sm-8">
                <input type="text" id="inventor_name" name="handInInventor" placeholder="发明人" class="form-control">
            </div>
        </div>
        <div class="form-group col-sm-3">
            <label for="dept_name1" class="control-label col-sm-4">部门：</label>
            <div class="col-sm-8">
                <select name="deptId" id="dept_name1" class="form-control">
                </select>
            </div>
        </div>
        <div class=""></div>
        <div class="col-sm-12" style="margin-top: 20px;">
            <button class="layui-btn layui-btn-fluid" onclick="mohuchaxun()" style="margin: auto;" type="button">查询
            </button>
        </div>
    </form>
</div>
<div class="col-sm-12">
    <div class="col-sm-1" style="padding: 0 0 10px 0">
        <button id="addHandIn" class="layui-btn layui-btn-primary layui-btn-fluid">新建交底书</button>
    </div>
</div>
<div id="addHandInPage" class="modal fade">
    <form id="addHandInForm" class="form-horizontal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header center">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">新建交底书</h4>
                    </h4>
                </div>
                <div class="modal-body">
                    <input type="reset" id="reset" style="display: none">
                    <div class="form-group">
                        <label for="hand_in_name" class="control-label col-sm-3">交底书名称:</label>
                        <div class="col-sm-8">
                            <input type="text" id="hand_in_name" name="handInName" class="form-control" required
                                   lay-verify="required">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="hand_in_no" class="control-label col-sm-3">编号:</label>
                        <div class="col-sm-8">
                            <input type="text" id="hand_in_no" name="handInNo" class="form-control" required
                                   lay-verify="required" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="hand_in_inventor" class="control-label col-sm-3">发明人:</label>
                        <div class="col-sm-8">
                            <input type="text" id="hand_in_inventor" name="handInInventor" class="form-control"
                                   required lay-verify="required">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="dept_name2" class="control-label col-sm-3">部门：</label>
                        <div class="col-sm-8">
                            <select name="deptId" id="dept_name2" class="form-control">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="file" class="control-label col-sm-3">文件:</label>
                        <div class="col-sm-8">
                            <label for="file" id="fileLabel" class="control-label text-primary">
                                <img th:src="@{/static/mine/images/document_upload.png}" alt=""
                                     style="width: 40px;cursor: pointer;">
                            </label>
                            <input type="file" id="file" name="file" required lay-verify="required"
                                   style="display: none;">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                    <button type="reset" style="display: none;">重置</button>
                </div>
            </div>
        </div>
    </form>
</div>
<div></div>
<div class="col-sm-12">
    <table id="PHandInListId" class="table"></table>
</div>
<script type="text/javascript" th:src="@{/static/mine/js/page.js}">

</script>
<script>

    /*初始化函数*/
    $(function () {
        PHandInListAll();
    });

    /*模糊查询*/
    function mohuchaxun() {
        $('#PHandInListId').bootstrapTable('destroy');
        $('#PHandInListId').bootstrapTable('refresh');
        PHandInListAll();
    }

    /*bootTable展示所有专利信息*/
    function PHandInListAll() {
        var handInName = $("input[name=handInName]").val();
        $("#PHandInListId").bootstrapTable({
            url: "/p_hand_in/ShowTabHandAndMoHu",//路径
            method: "get", 			 //请求方式
            cache: false,		    //关闭缓存
            striped: true,        //是否有斑马线效果
            pagination: true,      //开启分页
            sortable: true,     //是否启用排序
            sortOrder: "asc",   //排序的方式
            sidePagination: "client", //client客户端分页,"server"服务端分页
            clickToSelect: true,	 //设置复选框头

            columns: [
                {field: "handInNo", title: "编号", align: "center"},
                {field: "handInName", title: "专利名称", align: "center"},
                {field: "handInFrequency", title: "申请文件数", align: "center"},
                {field: "handInInventor", title: "发明人", align: "center"},
                {field: "userName", title: "申请人", align: "center"},
                {field: "deptName", title: "部门", align: "center"},
                {field: "handInTime", title: "申请时间", align: "center"},
                {field: "handInAuditStatus", title: "目前状态", align: "center"},
                {field:"",title:"操作",align :"center",
                    formatter: function (value, row, index) {
                        if(row.handInAuditStatus==0){
                            return "<a href='javaScript:Weiqianpi("+row.id+")'>审核</a>";
                        }else if(row.handInAuditStatus==1){
                            return "<a href='javaScript:Weiqianpi("+row.id+")'>查看</a>";
                        }else {
                            return "<a href='javaScript:Weiqianpi("+row.id+")'>被驳回</a>";
                        }
                    }}

            ],
            queryParams: function (params) {
                return $("#selectItem").serialize();
            },
        })
    }
</script>
</body>
</html>